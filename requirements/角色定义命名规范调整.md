<!-- # 需求文档

## 1. 项目现状与核心目标

当前项目中存在两套提示词体系: 全局系统提示词(systemPrompt)与主/子代理角色定义. 由于主代理当前使用 systemPrompt 字段,子代理使用 role 字段,容易与全局系统提示词系统混用,造成维护困惑. 本需求希望统一主代理与子代理的角色定义变量命名为 xxxAgentRole 风格,与 systemPrompt 等系统提示词命名区分,提升可读性与可维护性.

## 2. 范围与边界

**功能点简述**:

- [ ] 主代理角色定义变量命名调整为 mainAgentRole,避免与全局 systemPrompt 混用.
- [ ] 子代理角色定义变量命名调整为 subAgentRole.
- [ ] 调整后的命名需在配置文件,读取逻辑,UI,消息构建链路中保持一致.
- [ ] 主代理与子代理角色定义为必填项,缺失时给出警告并回退到默认角色定义.
- [ ] 保留全局系统提示词系统的 systemPrompt 命名与配置方式.

**排除项**:

- 不改变角色定义内容文本,仅调整变量命名.
- 不改变全局系统提示词(systemPrompt)内容或位置.
- 不调整角色定义的业务逻辑与插入策略.

## 3. 举例覆盖需求和边缘情况

- **例 1: 主代理配置读取**:
  原变量名为 systemPrompt,目标为 mainAgentRole,行为保持一致.
- **例 2: 子代理配置读取**:
  原变量名为 role,目标为 subAgentRole,行为保持一致.
- **例 3: 配置缺失**:
  若配置文件中缺失 mainAgentRole 或 subAgentRole,视为配置错误,需要补齐后再执行.
- **例 4: 全局系统提示词**:
  systemPrompt 仍指向全局系统提示词配置,不被改名,继续通过现有配置管理.

## 4. 需求合理性说明

- **可读性**: 角色定义与系统提示词语义区分,减少误用风险.
- **一致性**: 主代理与子代理命名风格统一,便于跨模块维护.
- **可扩展性**: 后续新增代理角色时,有清晰的命名约束可依循. -->
已完成