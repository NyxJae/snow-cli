# 合并到 0.6.32 冲突解决需求文档

## 背景
当前在将 upstream 0.6.32 合并到本地分支时,子代理与配置相关模块出现多处冲突.

## 本次冲突解决目标
1. 不引入上游新增的内置子代理 agent_analyze,agent_debug.
2. 内置子代理以本地现有体系为准.
3. 子代理配置逻辑对齐上游 followGlobal 语义:
   - index 0 表示 Follow Global.
   - index > 0 表示指定 profile,映射为 availableProfiles[index - 1].
4. 保留并确保 editableFileSuffixes 字段与功能持续生效.
5. 保留本地将 BUILTIN_AGENTS 拆分到单独文件(builtinSubAgents.ts)的架构.
6. 手动清理冲突标记并修正连带逻辑,保证构建通过.

## 涉及文件
- source/mcp/subagent.ts
- source/utils/execution/subAgentExecutor.ts
- source/ui/pages/SubAgentConfigScreen.tsx
- source/utils/config/subAgentConfig.ts
- source/i18n/lang/en.ts
- source/i18n/lang/zh.ts
- source/i18n/lang/zh-TW.ts
- source/i18n/types.ts

## 验收标准
1. 上述冲突文件不再包含 conflict markers.
2. 子代理列表与内置 ID 白名单不包含 agent_analyze,agent_debug.
3. SubAgentConfigScreen 中 followGlobal 与 editableFileSuffixes 同时可用.
4. i18n 与类型定义与 UI 字段一致.
5. npm run build 通过.
